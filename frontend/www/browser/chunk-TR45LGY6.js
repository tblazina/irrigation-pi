import{a as X}from"./chunk-FNLJE7QV.js";import{A as y,Aa as K,B as P,Ea as N,Fa as Q,G as g,I as V,J as v,Ma as W,N as U,P as C,b as u,d as h,e as E,f as d,fa as H,g as b,h as x,j as f,l as D,m as F,n as $,na as z,p as M,pa as O,q as p,qa as q,r as m,ra as G,t as c,u as A,v as j,w as s,x as l,xa as J,y as k,z as B}from"./chunk-XX3QOINY.js";import"./chunk-FVSUARKE.js";import"./chunk-NA2OGXLT.js";import"./chunk-GHOA5HSF.js";import"./chunk-SZCERZCG.js";import"./chunk-G3CV3VGG.js";import"./chunk-GFTFUPMB.js";import"./chunk-C4ZWKFGK.js";import"./chunk-F6OOB4LP.js";import"./chunk-4U6PRYVA.js";import"./chunk-6O5TN2LV.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as R,b as L,d as _,e as o}from"./chunk-PG5KTQWO.js";var I="/v1/relay",S=(()=>{let e=class e extends X{getRelay(t){return this.getAppConfig().pipe(d(r=>{let i=new URL(`${r.api.host}${I}/${t}`);return this.httpClient.get(i.toString()).pipe(h(a=>(this.showToast("There was an error retrieving the relay!","danger"),u(()=>a))))}))}getRelays(){return this.getAppConfig().pipe(d(t=>{let r=new URL(`${t.api.host}${I}/`);return this.httpClient.get(r.toString()).pipe(h(i=>(this.showToast("There was an error getting the list of relays!","danger"),u(()=>i))))}))}updateRelay(t,r){return this.getAppConfig().pipe(d(i=>{let a=new URL(`${i.api.host}${I}/${t}`);return this.httpClient.put(a.toString(),r).pipe(b(()=>{this.showToast("Relay was updated sucessfully!","success")}),h(w=>(this.showToast("There was an error updating the relay!","danger"),u(()=>w))))}))}};o(e,"\u0275fac",(()=>{let t;return function(i){return(t||(t=$(e)))(i||e)}})()),o(e,"\u0275prov",x({token:e,factory:e.\u0275fac,providedIn:"root"}));let n=e;return n})();var ee=(()=>{let e=class e{constructor(t){o(this,"relayService");o(this,"relay");o(this,"refreshList",new M);this.relayService=t}onRelayToggle(t){let a=this.relay,{position:r}=a,i=_(a,["position"]);i=L(R({},i),{on:t.detail.checked}),this.relayService.updateRelay(this.relay.position,i).pipe(E(()=>{this.refreshList.emit()})).subscribe()}};o(e,"\u0275fac",function(r){return new(r||e)(m(S))}),o(e,"\u0275cmp",f({type:e,selectors:[["app-relay-tile"]],inputs:{relay:"relay"},outputs:{refreshList:"refreshList"},standalone:!0,features:[v],decls:3,vars:2,consts:[[3,"ionChange","checked"]],template:function(r,i){r&1&&(s(0,"ion-item")(1,"ion-toggle",0),y("ionChange",function(w){return i.onRelayToggle(w)}),g(2),l()()),r&2&&(p(),c("checked",i.relay.on),p(),V("Position ",i.relay.position,""))},dependencies:[C,H,G,W],changeDetection:0}));let n=e;return n})();var te=(n,e)=>e.position;function re(n,e){if(n&1){let T=B();s(0,"app-relay-tile",4),y("refreshList",function(){D(T);let r=P();return F(r.refreshList())}),l()}if(n&2){let T=e.$implicit;c("relay",T)}}var Se=(()=>{let e=class e{constructor(t,r){o(this,"relayService");o(this,"cdr");o(this,"relays",[]);this.relayService=t,this.cdr=r}ionViewDidEnter(){this.refreshList()}refreshList(){this.relayService.getRelays().subscribe({next:t=>{this.relays=t,this.cdr.detectChanges()}})}};o(e,"\u0275fac",function(r){return new(r||e)(m(S),m(U))}),o(e,"\u0275cmp",f({type:e,selectors:[["app-relay-list"]],standalone:!0,features:[v],decls:10,vars:2,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],[3,"relay"],[3,"refreshList","relay"]],template:function(r,i){r&1&&(s(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),k(3,"ion-menu-button"),l(),s(4,"ion-title"),g(5,"Relays"),l()()(),s(6,"ion-content",2)(7,"ion-list"),A(8,re,1,1,"app-relay-tile",3,te),l()()),r&2&&(c("translucent",!0),p(6),c("fullscreen",!0),p(2),j(i.relays))},dependencies:[C,q,Q,z,K,N,O,J,ee],changeDetection:0}));let n=e;return n})();export{Se as RelayListPage};
